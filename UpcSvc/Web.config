<?xml version="1.0"?>
<configuration>
  <appSettings file="SecretSettings.config">
    <add key="aspnet:UseTaskFriendlySynchronizationContext" value="true"/>
  </appSettings>
  <!--
    For a description of web.config changes see http://go.microsoft.com/fwlink/?LinkId=235367.

    The following attributes can be set on the <httpRuntime> tag.
      <system.Web>
        <httpRuntime targetFramework="4.6.2" />
      </system.Web>
  -->
  <system.web>
    <compilation debug="true" targetFramework="4.6.2"/>
    <httpRuntime targetFramework="4.5.2"/>
    <customErrors mode="Off"/>
  </system.web>
  <system.serviceModel>
    <services>
      <service behaviorConfiguration="UpcSvc.Service1Behavior" name="UpcSvc.UpcSvc">
        <endpoint address="soap" binding="basicHttpBinding" contract="UpcSvc.IUpcSvc"/>
        <endpoint address="rest" behaviorConfiguration="JsonBehavior" binding="webHttpBinding" bindingConfiguration="crossDomain" contract="UpcSvc.IUpcSvc"/>
        <endpoint address="mex" binding="mexHttpBinding" contract="IMetadataExchange"/>
      </service>
    </services>
    <standardEndpoints>
      <webHttpEndpoint>
        <standardEndpoint helpEnabled="true" automaticFormatSelectionEnabled="true" crossDomainScriptAccessEnabled="true">
          <security mode="None"/>
        </standardEndpoint>
      </webHttpEndpoint>
    </standardEndpoints>
    <bindings>
      <webHttpBinding>
        <binding name="crossDomain" crossDomainScriptAccessEnabled="true"/>
      </webHttpBinding>
    </bindings>
    <behaviors>
      <endpointBehaviors>
        <behavior name="AspNetAjaxBehavior">
          <enableWebScript/>
        </behavior>
        <behavior name="JsonBehavior">
          <webHttp/>
        </behavior>
      </endpointBehaviors>
      <serviceBehaviors>
        <behavior name="UpcSvc.Service1Behavior">
          <!-- To avoid disclosing metadata information, set the value below to false and remove the metadata endpoint above before deployment -->
          <serviceMetadata httpGetEnabled="true" httpsGetEnabled="true"/>
          <!-- To receive exception details in faults for debugging purposes, set the value below to true.  Set to false before deployment to avoid disclosing exception information -->
          <serviceDebug includeExceptionDetailInFaults="true"/>
        </behavior>
      </serviceBehaviors>
    </behaviors>
    <protocolMapping>
      <add binding="basicHttpsBinding" scheme="https"/>
    </protocolMapping>
    <serviceHostingEnvironment aspNetCompatibilityEnabled="true" multipleSiteBindingsEnabled="true"/>
  </system.serviceModel>
  <system.webServer>
    <modules runAllManagedModulesForAllRequests="true"/>
    <!--
        To browse web app root directory during debugging, set the value below to true.
        Set to false before deployment to avoid disclosing web app folder information.
      -->
    <directoryBrowse enabled="false"/>
  </system.webServer>
  <system.diagnostics>
    <sources>
      <!-- NOTE: Changing the switchValue just changes what we *MIGHT* log. You also have to go to the application 
        diagnostics page on azure (under webapp, configure), and set the ApplicationLogging (table storage) to ON, 
        and set the logging level there to what you want uploaded to storage -->
      <source name="UpcSvc" switchType="System.Diagnostics.SourceSwitch" switchValue="Verbose"/>
    </sources>
    <sharedListeners>
      <add name="textlog" type="System.Diagnostics.TextWriterTraceListener" initializeData="c:\inetpub\logs\logfiles\log.log"/>
    </sharedListeners>
    <trace autoflush="true" indentsize="4">
      <listeners>
        <add name="textlog"/>
      </listeners>
    </trace>
  </system.diagnostics>
</configuration>